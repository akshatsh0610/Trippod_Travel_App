import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = "AIzaSyCNmydACbZRyg_JPMEOX0eCpBkNfx6zfIc";
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location : Jaipur, Rajasthan, for 3 days for couple with a cheap budget, give me a hotels options list with HotelName, Hotel address, Price, Hotel image url, geo coordinates, rating, description, and suggest itinery with placeName, PlaceDetails, Place Image Url, Geo Coordinates, ticket Pricing rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        { text: "```json\n" },
        {
          text: '{\n  "TripPlan": {\n    "Destination": "Jaipur, Rajasthan",\n    "Trip_Duration": "3 Days",\n    "Traveler_Type": "Couple",\n    "Budget": "Cheap",\n    "HotelOptions": [\n      {\n        "HotelName": "Hotel Raj Palace",\n        "HotelAddress": "Near City Palace, Jaipur, Rajasthan",\n        "Price": "₹1500",\n        "HotelImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Hotel_Raj_Palace.jpg/1200px-Hotel_Raj_Palace.jpg",\n        "GeoCoordinates": "26.9124° N, 75.8075° E",\n        "Rating": "4.2",\n        "Description": "A budget-friendly hotel near the city center with clean and comfortable rooms."\n      },\n      {\n        "HotelName": "Hotel City Inn",\n        "HotelAddress": "Johari Bazaar, Jaipur, Rajasthan",\n        "Price": "₹1800",\n        "HotelImageUrl": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4H3K9o8b4z-eP8V9q5_rF92L2jO2k9m8K-b8c&s",\n        "GeoCoordinates": "26.9235° N, 75.8091° E",\n        "Rating": "4.0",\n        "Description": "Offers comfortable rooms and convenient location near shopping areas."\n      },\n      {\n        "HotelName": "Hotel Royal Plaza",\n        "HotelAddress": "Near Hawa Mahal, Jaipur, Rajasthan",\n        "Price": "₹2000",\n        "HotelImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Hotel_Golden_Palace_-_Jaipur_India.jpg/1200px-Hotel_Golden_Palace_-_Jaipur_India.jpg",\n        "GeoCoordinates": "26.9220° N, 75.8221° E",\n        "Rating": "4.5",\n        "Description": "A good option for budget travellers. Situated close to significant tourist spots."\n      }\n    ],\n    "Itinerary": [\n      {\n        "Day": "1",\n        "Places": [\n          {\n            "PlaceName": "City Palace",\n            "PlaceDetails": "A historical palace complex.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/City_Palace_Jaipur.jpg/1280px-City_Palace_Jaipur.jpg",\n            "GeoCoordinates": "26.9241° N, 75.8104° E",\n            "TicketPricing": "₹500 (approx)",\n            "TimeTravel": "3 hours",\n            "BestTimeToVisit": "Morning (8 am - 12 pm)"\n          },\n          {\n            "PlaceName": "Jantar Mantar",\n            "PlaceDetails": "Astronomical observatory.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Jantar_Mantar_Jaipur.jpg/1280px-Jantar_Mantar_Jaipur.jpg",\n            "GeoCoordinates": "26.9252° N, 75.8112° E",\n            "TicketPricing": "₹60 (approx)",\n            "TimeTravel": "1 hour",\n            "BestTimeToVisit": "Morning (8 am - 12 pm)"\n          }\n        ]\n      },\n      {\n        "Day": "2",\n        "Places": [\n          {\n            "PlaceName": "Hawa Mahal",\n            "PlaceDetails": "Palace of winds.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Hawa_Mahal_Jaipur.jpg/1280px-Hawa_Mahal_Jaipur.jpg",\n            "GeoCoordinates": "26.9263° N, 75.8123° E",\n            "TicketPricing": "₹50 (approx)",\n            "TimeTravel": "2 hours",\n            "BestTimeToVisit": "Morning (8 am - 11 am)"\n          },\n          {\n            "PlaceName": "Amer Fort",\n            "PlaceDetails": "Majestic fort.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Amer_Fort_Jaipur.jpg/1280px-Amer_Fort_Jaipur.jpg",\n            "GeoCoordinates": "26.9274° N, 75.8134° E",\n            "TicketPricing": "₹600 (approx)",\n            "TimeTravel": "4 hours",\n            "BestTimeToVisit": "Morning (8 am - 12 pm)"\n          }\n        ]\n      },\n      {\n        "Day": "3",\n        "Places": [\n          {\n            "PlaceName": "Nahargarh Fort",\n            "PlaceDetails": "Hilltop fort with panoramic views.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Nahargarh_Fort_Jaipur.jpg/1280px-Nahargarh_Fort_Jaipur.jpg",\n            "GeoCoordinates": "26.9285° N, 75.8145° E",\n            "TicketPricing": "₹200 (approx)",\n            "TimeTravel": "3 hours",\n            "BestTimeToVisit": "Morning (8 am - 12 pm)"\n          },\n          {\n            "PlaceName": "Chokhi Dhani",\n            "PlaceDetails": "Traditional Rajasthani village experience.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/Chokhi_Dhani.jpg/1280px-Chokhi_Dhani.jpg",\n            "GeoCoordinates": "26.9296° N, 75.8156° E",\n            "TicketPricing": "₹1200 (approx)",\n            "TimeTravel": "4 hours",\n            "BestTimeToVisit": "Evening (4 pm - 9 pm)"\n          }\n        ]\n      }\n    ]\n  }\n}',
        },
        { text: "\n```" },
      ],
    },
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location : Jaipur, Rajasthan, for 3 days for couple with a cheap budget, give me a hotels options list with HotelName, Hotel address, Price, Hotel image url, geo coordinates, rating, description, and suggest itinery with placeName, PlaceDetails, Place Image Url, Geo Coordinates, ticket Pricing rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "TripPlan": {\n    "Destination": "Jaipur, Rajasthan",\n    "Trip_Duration": "3 Days",\n    "Traveler_Type": "Couple",\n    "Budget": "Cheap",\n    "HotelOptions": [\n      {\n        "HotelName": "Hotel City Inn",\n        "HotelAddress": "Near Johari Bazaar, Jaipur, Rajasthan",\n        "Price": "₹1,500 - ₹2,000 (per night)",\n        "HotelImageUrl": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4H3K9o8b4z-eP8V9q5_rF92L2jO2k9m8K-b8c&s",  \n        "GeoCoordinates": "26.9235° N, 75.8091° E",\n        "Rating": "4.0",\n        "Description": "A budget-friendly hotel near Johari Bazaar, offering clean rooms and basic amenities. This is a popular location with easy access to tourist spots.  Good option for budget travellers."\n      },\n      {\n        "HotelName": "Hotel Raj Palace",\n        "HotelAddress": "Near City Palace, Jaipur, Rajasthan",\n        "Price": "₹1,200 - ₹1,800 (per night)",\n\t\t"HotelImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Hotel_Raj_Palace.jpg/1200px-Hotel_Raj_Palace.jpg",\n        "GeoCoordinates": "26.9124° N, 75.8075° E",\n        "Rating": "4.2",\n        "Description": "Known for its location near the City Palace.  Clean rooms with basic amenities. Good value for money compared to other options in the vicinity of main attractions."\n      },\n      {\n        "HotelName": "Hotel Ganga Inn",\n        "HotelAddress": "Near Hawa Mahal, Jaipur, Rajasthan",\n        "Price": "₹1,300 - ₹1,700 (per night)",\n\t\t"HotelImageUrl": "https://i.pinimg.com/originals/20/e7/5c/20e75c351182f08320a405f12ff20991.jpg",\n        "GeoCoordinates": "26.9220° N, 75.8221° E",\n        "Rating": "4.1",\n        "Description": "A moderately priced hotel near the famous Hawa Mahal.  Offers basic amenities and a convenient location for exploring the Old City."\n      }\n    ],\n    "Itinerary": [\n      {\n        "Day": "1: City Palace & Jantar Mantar",\n        "Places": [\n          {\n            "PlaceName": "City Palace",\n            "PlaceDetails": "A majestic complex showcasing royal history.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/City_Palace_Jaipur.jpg/1280px-City_Palace_Jaipur.jpg",\n            "GeoCoordinates": "26.9241° N, 75.8104° E",\n            "TicketPricing": "₹500 (approx)",\n            "TimeTravel": "2 hours",\n            "BestTimeToVisit": "Morning (8:00 AM - 12:00 PM)"\n          },\n\t\t  {\n            "PlaceName": "Jantar Mantar",\n            "PlaceDetails": "An astronomical observatory with intricate instruments.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Jantar_Mantar_Jaipur.jpg/1280px-Jantar_Mantar_Jaipur.jpg",\n            "GeoCoordinates": "26.9252° N, 75.8112° E",\n            "TicketPricing": "₹60 (approx)",\n            "TimeTravel": "1 hour",\n            "BestTimeToVisit": "Morning (9:00 AM - 11:00 AM)"\n          }\n        ]\n      },\n      {\n        "Day": "2: Hawa Mahal & Amer Fort",\n        "Places": [\n          {\n            "PlaceName": "Hawa Mahal",\n            "PlaceDetails": "The Palace of Winds, known for its intricate facade.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Hawa_Mahal_Jaipur.jpg/1280px-Hawa_Mahal_Jaipur.jpg",\n            "GeoCoordinates": "26.9263° N, 75.8123° E",\n            "TicketPricing": "₹50 (approx)",\n            "TimeTravel": "1 hour",\n            "BestTimeToVisit": "Morning (9:00 AM - 11:00 AM)"\n          },\n\t\t  {\n            "PlaceName": "Amer Fort",\n            "PlaceDetails": "A magnificent hilltop fort with a royal history.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Amer_Fort_Jaipur.jpg/1280px-Amer_Fort_Jaipur.jpg",\n            "GeoCoordinates": "26.9274° N, 75.8134° E",\n            "TicketPricing": "₹600 (approx)",\n            "TimeTravel": "3-4 hours (including elephant ride, if you choose)",\n            "BestTimeToVisit": "Early morning (8:00 AM) or late afternoon (3:00 PM) to avoid midday heat"\n          }\n        ]\n      },\n      {\n        "Day": "3: Nahargarh Fort & Shopping",\n        "Places": [\n          {\n            "PlaceName": "Nahargarh Fort",\n            "PlaceDetails": "A hilltop fort with breathtaking city views.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Nahargarh_Fort_Jaipur.jpg/1280px-Nahargarh_Fort_Jaipur.jpg",\n            "GeoCoordinates": "26.9285° N, 75.8145° E",\n            "TicketPricing": "₹200 (approx)",\n            "TimeTravel": "2-3 hours",\n            "BestTimeToVisit": "Morning (8:00 AM - 12:00 PM)"\n          },\n          {\n            "PlaceName": "Johari Bazaar/Bapu Bazaar",\n            "PlaceDetails": "Experience local markets for shopping.",\n            "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/Johari_Bazaar_Jaipur.jpg/800px-Johari_Bazaar_Jaipur.jpg",\n            "GeoCoordinates": "26.9268° N, 75.8268° E",\n            "TicketPricing": "N/A",\n            "TimeTravel": "2-3 hours",\n            "BestTimeToVisit": "Morning or afternoon"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n**Important Considerations and Improvements:**\n\n* **Price Ranges:** Added price ranges to hotel options for better accuracy.  Actual prices fluctuate.\n* **Time Estimates:** More realistic travel times for places, especially Amer Fort which includes travel time and potentially an elephant ride.\n* **Heat Considerations:** Added advice for avoiding midday heat, especially at Amer Fort.\n* **Shopping:** Added Johari Bazaar as a potential shopping option for Day 3, which is a great place for budget-friendly souvenir shopping.\n* **Image URLs:** Updated and improved image URLs.\n* **Hotel Descriptions:**  Added a bit more detail to the hotel descriptions.\n* **Removed unnecessary fields:** Removed unnecessary `rating` field for places as it was redundant.\n\nThis revised plan is more practical and detailed for a couple on a budget in Jaipur. Remember to check current pricing, availability, and book accommodations in advance, especially during peak season. Remember to factor in travel time between locations.  Enjoy your trip!',
        },
      ],
    },
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location : Jaipur, Rajasthan, for 3 days for couple with a cheap budget, give me a hotels options list with HotelName, Hotel address, Price, Hotel image url, geo coordinates, rating, description, and suggest itinery with placeName, PlaceDetails, Place Image Url, Geo Coordinates, ticket Pricing rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        { text: "```json\n" },
        {
          text: '{"TripPlan": {"Destination": "Jaipur, Rajasthan", "Trip_Duration": "3 Days", "Traveler_Type": "Couple", "Budget": "Cheap", "HotelOptions": [{"HotelName": "Zostel Jaipur", "HotelAddress": "Near MI Road, Jaipur, Rajasthan", "Price": "₹600-₹1000", "HotelImageUrl": "https://www.zostel.com/images/hostels/jaipur/jaipur-exterior.jpg", "GeoCoordinates": "26.9167° N, 75.7833° E", "Rating": "4.0", "Description": "A popular hostel with dorm and private rooms. Social atmosphere, budget friendly."}, {"HotelName": "Haveli Dharampura", "HotelAddress": "Dharmapura, Jaipur, Rajasthan", "Price": "₹1500-₹2500", "HotelImageUrl": "https://www.havelidharampura.com/wp-content/uploads/2019/10/Haveli-Dharampura-Jaipur-Luxury-Heritage-Hotel.jpg", "GeoCoordinates": "26.9200° N, 75.8067° E", "Rating": "4.5", "Description": "A heritage hotel offering more luxurious rooms at a slightly higher price point than hostels, but still reasonably priced compared to luxury hotels."}, {"HotelName": "Bhagwati Guest House", "HotelAddress": "Near Railway Station, Jaipur, Rajasthan", "Price": "₹500-₹800", "HotelImageUrl": "https://lh3.googleusercontent.com/p/AF1QipN0E784-j-v8sV1hB0uH2bM8C2X5j1W9r5k-zM=s1360-w1360-h872", "GeoCoordinates": "26.9200° N, 75.8200° E", "Rating": "3.5", "Description": "A basic guesthouse near the railway station. Best for those who prioritize affordability and location."}], "Itinerary": [{"Day": "Day 1: Old City Charm", "Places": [{"PlaceName": "Hawa Mahal", "PlaceDetails": "Iconic Palace of Winds", "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Hawa_Mahal_Jaipur.jpg/1280px-Hawa_Mahal_Jaipur.jpg", "GeoCoordinates": "26.9263° N, 75.8123° E", "TicketPricing": "₹50", "TimeTravel": "1 hour", "BestTimeToVisit": "Morning"}, {"PlaceName": "City Palace", "PlaceDetails": "Magnificent Royal Palace", "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/City_Palace_Jaipur.jpg/1280px-City_Palace_Jaipur.jpg", "GeoCoordinates": "26.9241° N, 75.8104° E", "TicketPricing": "₹500", "TimeTravel": "2-3 hours", "BestTimeToVisit": "Morning"}, {"PlaceName": "Jantar Mantar", "PlaceDetails": "Astronomical Observatory", "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Jantar_Mantar_Jaipur.jpg/1280px-Jantar_Mantar_Jaipur.jpg", "GeoCoordinates": "26.9252° N, 75.8112° E", "TicketPricing": "₹60", "TimeTravel": "1 hour", "BestTimeToVisit": "Afternoon"}]}, {"Day": "Day 2: Forts & Views", "Places": [{"PlaceName": "Amer Fort", "PlaceDetails": "Majestic Fort with Elephant Ride Option", "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Amer_Fort_Jaipur.jpg/1280px-Amer_Fort_Jaipur.jpg", "GeoCoordinates": "26.9274° N, 75.8134° E", "TicketPricing": "₹100-₹600 (depending on inclusions)", "TimeTravel": "3-4 hours", "BestTimeToVisit": "Morning"}, {"PlaceName": "Nahargarh Fort", "PlaceDetails": "Hilltop Fort with Panoramic Views", "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Nahargarh_Fort_Jaipur.jpg/1280px-Nahargarh_Fort_Jaipur.jpg", "GeoCoordinates": "26.9285° N, 75.8145° E", "TicketPricing": "₹200", "TimeTravel": "2-3 hours", "BestTimeToVisit": "Late Afternoon/Evening"}, {"PlaceName": "Jaigarh Fort", "PlaceDetails": "Fort housing the world\'s largest cannon on wheels", "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Jaigarh_Fort_Jaipur.jpg/1280px-Jaigarh_Fort_Jaipur.jpg", "GeoCoordinates": "26.9814° N, 75.8858° E", "TicketPricing": "₹100", "TimeTravel": "2 hours", "BestTimeToVisit": "Late Afternoon/Evening"}]}, {"Day": "Day 3: Culture & Markets", "Places": [{"PlaceName": "Albert Hall Museum", "PlaceDetails": "Museum with diverse artifacts", "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Albert_Hall_Museum_Jaipur.jpg/1280px-Albert_Hall_Museum_Jaipur.jpg", "GeoCoordinates": "26.9194° N, 75.7981° E", "TicketPricing": "₹100", "TimeTravel": "2 hours", "BestTimeToVisit": "Morning"}, {"PlaceName": "Johari Bazaar", "PlaceDetails": "Market for Gems and Jewelry", "PlaceImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/Johari_Bazaar_Jaipur.jpg/800px-Johari_Bazaar_Jaipur.jpg", "GeoCoordinates": "26.9268° N, 75.8268° E", "TicketPricing": "N/A", "TimeTravel": "2-3 hours", "BestTimeToVisit": "Anytime"}, {"PlaceName": "Bapu Bazaar", "PlaceDetails": "Market for Textiles and handicrafts", "PlaceImageUrl": "https://www.holidify.com/images/cmsuploads/compressed/0000000000004621_1657085990_bapu_bazaar_jaipur_cover_image.jpg", "GeoCoordinates": "26.9244° N, 75.8156° E", "TicketPricing": "N/A", "TimeTravel": "2-3 hours", "BestTimeToVisit": "Anytime"}]}]}}',
        },
        { text: "\n```" },
      ],
    },
  ],
});


